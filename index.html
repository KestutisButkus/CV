<!DOCTYPE html>
<html lang="lt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>CV</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        :root {
            --bg: #eef1f5;
            --text: #1f2a44;
            --panel-bg: #ffffff;
            --panel-text: #1f2a44;
            --left-bg: #1f2a44;
            --left-text: #ffffff;
        }

        body.dark {
            --bg: #0f1116;
            --text: #e4e6eb;
            --panel-bg: #1a1c23;
            --panel-text: #e4e6eb;
            --left-bg: #11131a;
            --left-text: #e4e6eb;
        }

        body {
            background: var(--bg);
            color: var(--text);
            font-family: "Inter", "Segoe UI", sans-serif;
        }

        .cv-container {
            max-width: 950px;
            margin: 20px auto;
            background: var(--panel-bg);
            border-radius: 14px;
            overflow: hidden;
            box-shadow: 0 4px 28px rgba(0,0,0,0.08);
        }

        .left-panel {
            background: var(--left-bg);
            color: var(--left-text);
            padding: 40px 35px;
            min-height: 100%;
        }

        .left-panel h3 {
            font-size: 1.2rem;
            margin-top: 30px;
            margin-bottom: 15px;
            font-weight: 600;
            border-bottom: 1px solid rgba(255,255,255,0.2);
            padding-bottom: 5px;
        }

        .profile-photo {
            width: 140px;
            height: 140px;
            border-radius: 50%;
            object-fit: cover;
            border: 4px solid rgba(255,255,255,0.25);
            margin-bottom: 15px;
        }

        .right-panel {
            padding: 40px 50px;
            color: var(--panel-text);
        }

        .name-title h1 {
            font-size: 2.3rem;
            margin-bottom: 0;
            font-weight: 700;
        }

        .name-title span {
            font-size: 1.1rem;
            color: #6c757d;
        }

        body.dark .name-title span {
            color: #a0a4b0;
        }

        .section-title {
            font-size: 1.3rem;
            margin-top: 35px;
            font-weight: 600;
            color: var(--panel-text);
        }

        .line {
            height: 2px;
            width: 60px;
            background: var(--panel-text);
            margin: 6px 0 20px 0;
        }

        .info-list, .info-list li {
            padding-left: 0;
            list-style: none;
            margin-bottom: 10px;
        }

        .info-list li {
            opacity: 0.9;
        }

        .skills-list {
            padding-left: 0;
            list-style: none;
        }

        .skills-list li {
            margin-bottom: 6px;
        }

        @media (max-width: 768px) {
            .cv-container {
                margin: 10px;
                border-radius: 10px;
            }

            .left-panel {
                padding: 25px 20px;
                text-align: center;
            }

            .right-panel {
                padding: 25px 20px;
            }

            .profile-photo {
                width: 110px;
                height: 110px;
            }

            .name-title h1 {
                font-size: 1.8rem;
                text-align: center;
            }

            .name-title span {
                font-size: 1rem;
                text-align: center;
                display: block;
            }

            .section-title {
                font-size: 1.2rem;
                text-align: center;
            }

            .line {
                margin-left: auto;
                margin-right: auto;
            }
        }
    </style>
</head>

<body>
<button id="themeToggle" class="btn btn-sm btn-secondary" style="position:fixed; top:15px; right:15px; z-index:1000;">
    Dark / Light
</button>

<button id="pdfBtn" class="btn btn-sm btn-primary" style="position:fixed; top:60px; right:15px; z-index:1000;">
    PDF
</button>

<select id="cvSelect" class="form-select form-select-sm" style="position:fixed; top:105px; right:15px; width:160px; z-index:1000;">
    <option value="cv1.json">CV 1</option>
    <option value="cv2.json">CV 2</option>
    <option value="cv3.json">CV 3</option>
</select>

<div class="cv-container row g-0">

    <!-- LEFT PANEL -->
    <div class="col-md-4 left-panel">
        <div class="text-center">
            <img src="as.png" class="profile-photo" alt="photo">

            <h2 id="vardas" class="mt-2" style="font-size: 1.4rem; font-weight: 600;"></h2>
            <div id="pareigos" style="opacity: 0.85;"></div>
        </div>

        <h3>Kontaktai</h3>
        <ul id="kontaktai" class="info-list"></ul>

        <h3>Išsilavinimas</h3>
        <ul id="issilavinimas" class="info-list"></ul>

        <h3>Kalbos</h3>
        <ul id="kalbos" class="info-list"></ul>

        <h3>Įgūdžiai</h3>
        <ul id="igudziai" class="skills-list"></ul>
    </div>

    <!-- RIGHT PANEL -->
    <div class="col-md-8 right-panel">

        <div class="name-title">
            <h1 id="vardas2"></h1>
            <span id="pareigos2"></span>
        </div>

        <div class="section-title">Apie mane</div>
        <div class="line"></div>
        <p id="apie"></p>

        <div class="section-title">Darbo patirtis</div>
        <div class="line"></div>
        <div id="patirtis"></div>

        <div class="section-title">Papildoma</div>
        <div class="line"></div>
        <ul id="papildoma"></ul>

    </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
<script>
    function fillCV(data) {
        document.getElementById('vardas').textContent = data.vardas;
        document.getElementById('vardas2').textContent = data.vardas;
        document.getElementById('pareigos').textContent = data.pareigos;
        document.getElementById('pareigos2').textContent = data.pareigos;

        document.getElementById('kontaktai').innerHTML =
            data.kontaktai.map(x => `<li>${x}</li>`).join('');

        document.getElementById('issilavinimas').innerHTML =
            data.issilavinimas.map(x =>
                `<li><strong>${x.mokykla}</strong><br>${x.metai}<br>${x.sritis}</li>`
            ).join('');

        document.getElementById('kalbos').innerHTML =
            data.kalbos.map(x => `<li>${x}</li>`).join('');

        document.getElementById('igudziai').innerHTML =
            data.igudziai.map(x => `<li>${x}</li>`).join('');

        document.getElementById('apie').textContent = data.apie;

        document.getElementById('patirtis').innerHTML =
            data.patirtis.map(x =>
                `<p><strong>${x.imone}</strong><br>${x.metai}<br>${x.pareigos}</p>`
            ).join('');

        document.getElementById('papildoma').innerHTML =
            data.papildoma.map(x => `<li>${x}</li>`).join('');
    }

    function loadCV(file) {
        fetch(file)
            .then(r => r.json())
            .then(data => fillCV(data));
    }

    document.getElementById("themeToggle").onclick = () => {
        document.body.classList.toggle("dark");
        localStorage.setItem("theme", document.body.classList.contains("dark") ? "dark" : "light");
    };

    if (localStorage.getItem("theme") === "dark") {
        document.body.classList.add("dark");
    }

    document.getElementById("pdfBtn").onclick = () => {
        const element = document.querySelector(".cv-container");
        html2pdf().from(element).save("CV.pdf");
    };

    document.getElementById("cvSelect").onchange = (e) => {
        loadCV(e.target.value);
        localStorage.setItem("cvFile", e.target.value);
    };

    const savedCV = localStorage.getItem("cvFile") || "cv1.json";
    document.getElementById("cvSelect").value = savedCV;
    loadCV(savedCV);
</script>

</body>
</html>
